<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quản lý lịch thi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fc;
    }
    .sidebar {
      height: 100vh;
      background-color: white;
      border-right: 1px solid #dee2e6;
    }
    .card-rounded {
      border-radius: 1rem;
    }
    .btn-custom {
      background-color: #4f46e5;
      color: white;
    }
    tr.selected {
      background-color: #e2e6ff !important;
    }
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-2 sidebar p-3">
      <h4 class="fw-bold text-primary">Dash<span class="text-dark">Stack</span></h4>
      <hr>
      <button class="btn btn-primary w-100 mb-2">Quản lý kỳ thi</button>
      <button class="btn btn-outline-secondary w-100">Logout</button>
    </div>

    <!-- Main content -->
    <div class="col-md-10 p-4">
      <h3>Xin chào, quản lý</h3>
      <h4 class="mt-3">Quản lý lịch thi</h4>

      <div class="row mt-4">
        <!-- Danh sách lịch thi -->
        <div class="col-md-12" id="schedule-list">
          <div class="card card-rounded p-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="fw-bold">Danh sách lịch thi</h5>
              <div>
                <button class="btn btn-outline-primary btn-sm" onclick="openEditForm()">Chỉnh sửa</button>
                <button class="btn btn-primary btn-sm" onclick="openAddForm()">Thêm lịch thi</button>
              </div>
            </div>
            <table class="table table-bordered" id="exam-table">
              <thead>
                <tr>
                  <th>Tên kỳ thi</th>
                  <th>Loại chứng chỉ</th>
                  <th>Ngày thi</th>
                  <th>Giờ thi</th>
                  <th>Phòng thi</th>
                  <th>Trạng thái</th>
                </tr>
              </thead>
              <tbody>
                <tr onclick="selectRow(this)"><td>Anh văn B1</td><td>Ngoại ngữ</td><td>22/03/2025</td><td>08:00 AM</td><td>P.317</td><td class="text-warning">Đang mở</td></tr>
                <tr onclick="selectRow(this)"><td>Anh văn B2</td><td>Ngoại ngữ</td><td>22/03/2025</td><td>08:00 AM</td><td>P.317</td><td class="text-success">Đã đủ</td></tr>
                <tr onclick="selectRow(this)"><td>Anh văn B3</td><td>Ngoại ngữ</td><td>22/03/2025</td><td>08:00 AM</td><td>P.317</td><td class="text-danger">Hết hạn</td></tr>
                <tr onclick="selectRow(this)"><td>Tin học cơ sở</td><td>Tin học</td><td>22/03/2025</td><td>08:00 AM</td><td>P.317</td><td class="text-danger">Hết hạn</td></tr>
                <tr onclick="selectRow(this)"><td>Tin học văn phòng</td><td>Tin học</td><td>22/03/2025</td><td>08:00 AM</td><td>P.317</td><td class="text-success">Đã đủ</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Form thêm và chỉnh sửa -->
        <div class="col-md-4 d-none" id="form-container">
          <div class="card card-rounded p-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="fw-bold" id="form-title">Thêm lịch thi</h5>
              <button class="btn-close" onclick="closeForm()"></button>
            </div>
            <form>
              <div class="mb-3">
                <label class="form-label">Tên kỳ thi</label>
                <input type="text" class="form-control" id="exam-name">
              </div>
              <div class="mb-3">
                <label class="form-label">Loại chứng chỉ</label>
                <select class="form-select" id="exam-type">
                  <option>Ngoại ngữ</option>
                  <option>Tin học</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Giới hạn thí sinh</label>
                <input type="number" class="form-control" id="exam-limit">
              </div>
              <div class="mb-3">
                <label class="form-label">Ngày thi</label>
                <input type="date" class="form-control" id="exam-date">
              </div>
              <div class="mb-3">
                <label class="form-label">Giờ thi</label>
                <input type="time" class="form-control" id="exam-time">
              </div>
              <div class="mb-3">
                <label class="form-label">Phòng thi</label>
                <input type="text" class="form-control" id="exam-room">
              </div>
              <button type="submit" class="btn btn-custom w-100">Lưu</button>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<script>
  let selectedRow = null;

  function selectRow(row) {
    document.querySelectorAll('#exam-table tbody tr').forEach(tr => tr.classList.remove('selected'));
    row.classList.add('selected');
    selectedRow = row;
  }

  function openAddForm() {
    document.getElementById('form-title').innerText = 'Thêm lịch thi';
    document.getElementById('form-container').classList.remove('d-none');
    document.getElementById('schedule-list').classList.replace('col-md-12', 'col-md-8');
  }

  function openEditForm() {
    if (!selectedRow) return alert("Vui lòng chọn một dòng để chỉnh sửa");
    const cells = selectedRow.querySelectorAll('td');
    document.getElementById('exam-name').value = cells[0].innerText;
    document.getElementById('exam-type').value = cells[1].innerText;
    document.getElementById('exam-date').value = formatDate(cells[2].innerText);
    document.getElementById('exam-time').value = formatTime(cells[3].innerText);
    document.getElementById('exam-room').value = cells[4].innerText;
    document.getElementById('form-title').innerText = 'Chỉnh sửa lịch thi';
    document.getElementById('form-container').classList.remove('d-none');
    document.getElementById('schedule-list').classList.replace('col-md-12', 'col-md-8');
  }

  function closeForm() {
    document.getElementById('form-container').classList.add('d-none');
    document.getElementById('schedule-list').classList.replace('col-md-8', 'col-md-12');
    selectedRow = null;
    document.querySelectorAll('#exam-table tbody tr').forEach(tr => tr.classList.remove('selected'));
  }

  function formatDate(dateStr) {
    const [day, month, year] = dateStr.split('/');
    return `${year}-${month}-${day}`;
  }

  function formatTime(timeStr) {
    const [time, meridian] = timeStr.split(' ');
    let [hours, minutes] = time.split(':');
    if (meridian === 'PM' && hours !== '12') hours = parseInt(hours) + 12;
    if (meridian === 'AM' && hours === '12') hours = '00';
    return `${hours}:${minutes}`;
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>